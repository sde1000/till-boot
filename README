Build debian packages for network booting of tills

These packages are installed on a server (usually, but not
necessarily, the main till).

You must be (real) root when running the image build scripts.

Required packages:
debootstrap squashfs-tools systemd-container qemu-user-static binfmt-support wget parallel debhelper

To build the boot image and loaders package:

# ./build-all

To build the till-boot-config package:

$ cd till-boot-config
$ dpkg-buildpackage -us -uc


You can build the boot image packages on a machine of any architecture
(eg. amd64 on arm64 or armhf on i386), but building will be fastest
when a boot image is built on a machine with compatible
architecture. If you have access to both a PC and a Raspberry you may
want to split the work between the two for speed. Edit the build-all
script appropriately.


Terms used:

"platform": the type of computer to be booted.  Platforms vary in
their requirements for boot files and their placement: for example,
the 'pc' platform uses ipxe, boot-time config is placed into
'hostname.ipxe' files, and the DHCP server points the client at the
appropriate file.  The 'rpi' platform uses the PI's own network
bootloader; boot-time config and supporting files are placed into a
subdirectory named according to the serial number of the PI to be
booted.

Current platforms are 'pc' and 'rpi'.

"distribution": the codename of the debian-derived operating system,
eg. 'xenial', 'bionic', 'focal' for Ubuntu, 'buster' or 'bullseye' for
debian or raspberry pi os


Currently working:

pc focal amd64
pc buster {i386,amd64}
pc bullseye {i386,amd64}
rpi buster armhf
rpi bullseye {armhf,arm64}

Currently not working:

pc bionic {i386,amd64} (freezes at startup)

Will never work:

pc focal i386 (focal drops i386 support)
